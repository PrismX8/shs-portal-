<!DOCTYPE html>
<html lang="en">
<head>
<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "uklz62a91n");
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Nebulo World War II History - Comprehensive Historical Analysis</title>
<meta name="description" content="Explore the comprehensive history of World War II with detailed essays, articles, and accurate historical accounts of the global conflict that shaped the modern world.">

<style>
:root {
  --bg: #f5f5f5;
  --primary: #8B4513;
  --secondary: #DAA520;
  --dark: #2d3436;
  --light: #ffffff;
  --card-shadow: rgba(0, 0, 0, 0.15);
  --radius: 8px;
  --text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
}

* {
  box-sizing: border-box;
  font-family: 'Times New Roman', serif;
  margin: 0;
  padding: 0;
}

body {
  background: var(--bg);
  color: var(--dark);
  line-height: 1.7;
}

/* HEADER */
header {
  background: linear-gradient(135deg, #2c3e50, #34495e);
  color: var(--light);
  padding: 20px 40px;
  text-align: center;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  position: relative;
}

header h1 {
  font-size: 32px;
  font-weight: 700;
  margin-bottom: 8px;
  text-shadow: var(--text-shadow);
}

header p {
  font-size: 18px;
  opacity: 0.9;
  font-style: italic;
}

.website-btn {
  background: linear-gradient(135deg, #e74c3c, #c0392b);
  color: white;
  padding: 20px 50px;
  border-radius: 50px;
  text-decoration: none;
  font-weight: 700;
  font-size: 1.4rem;
  transition: all 0.3s ease;
  box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
  border: 3px solid rgba(255, 255, 255, 0.3);
  display: inline-block;
  margin: 30px auto;
  text-transform: uppercase;
  letter-spacing: 2px;
}

button {
  padding: 10px 18px;
  border: none;
  cursor: pointer;
  background: var(--light);
  color: var(--primary);
  font-weight: 600;
  border-radius: var(--radius);
  transition: all 0.3s ease;
}

.website-btn:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 12px 35px rgba(231, 76, 60, 0.6);
  background: linear-gradient(135deg, #c0392b, #e74c3c);
}



nav button:hover {
  background: var(--secondary);
  color: var(--dark);
}

/* MAIN */
main {
  max-width: 1200px;
  margin: auto;
  padding: 40px 20px;
}

/* PAGE */
.page {
  display: none;
  animation: fadeIn 0.5s ease;
}

.page.active {
  display: block;
}

@keyframes fadeIn {
  from {opacity: 0;}
  to {opacity:1;}
}

/* GAMES OVERLAY */
#gamesOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.95);
  display: none;
  z-index: 9999;
}

#gamesHeader {
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 10000;
}

#gamesHeader {
  position: absolute;
  top: 10px;
  left: 10px;
  right: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 10000;
}

#gamesHeader .left-controls {
  display: flex;
  gap: 8px;
  align-items: center;
}

#gamesHeader .right-controls {
  display: flex;
  gap: 8px;
}

#gamesHeader button {
  background: rgba(0,0,0,0.7);
  border: 1px solid rgba(255,255,255,0.3);
  color: white;
  font-size: 12px;
  padding: 6px 8px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
}

#backendInfo {
  background: rgba(0,0,0,0.8);
  color: #00ff88;
  font-size: 10px;
  padding: 4px 6px;
  border-radius: 3px;
  font-family: monospace;
  border: 1px solid rgba(0,255,136,0.3);
}

#gamesHeader button:hover {
  background: rgba(0,0,0,0.9);
  border-color: rgba(255,255,255,0.6);
  transform: scale(1.1);
}

#gamesFrame {
  position: absolute;
  top: 50px;
  left: 10px;
  right: 10px;
  bottom: 10px;
  width: calc(100% - 20px);
  height: calc(100% - 60px);
  border: none;
  border-radius: 8px;
  box-shadow: 0 0 50px rgba(0,0,0,0.5);
}

/* HERO SECTION */
.hero {
  background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1594736797933-d0401ba4c4a8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
  background-size: cover;
  background-position: center;
  height: 70vh;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: white;
  position: relative;
}

.hero-content {
  max-width: 900px;
  padding: 0 20px;
}

.hero h1 {
  font-size: 4rem;
  margin-bottom: 1rem;
  font-weight: 700;
  text-shadow: var(--text-shadow);
}

.hero p {
  font-size: 1.4rem;
  margin-bottom: 2rem;
  opacity: 0.9;
  line-height: 1.8;
}

/* FOOTER */
footer {
  text-align: center;
  padding: 30px 20px;
  background: #eee;
  color: #555;
  font-size: 14px;
  margin-top: 60px;
}

/* IMAGES IN HOME */
#home img {
  margin-top: 24px;
  border-radius: var(--radius);
  box-shadow: 0 4px 12px var(--card-shadow);
}

/* LINKS and bold text */
p strong {
  color: var(--primary);
}
</style>
<script async="async" data-cfasync="false" src="https://pl28348716.effectivegatecpm.com/51a4c39191ccc3c7ed7daf33d879ae94/invoke.js"></script>
</head>

<body>

<header>
  <h1>Nebulo World War II History</h1>
  <p>The Global Conflict That Shaped the Modern World</p>
  <button onclick="openGames()" class="website-btn">Nebulo (really history)Website</button>
</header>

<!-- HERO SECTION -->
<section class="hero">
  <div class="hero-content">
    <h1>The Greatest Conflict in Human History</h1>
    <p>World War II (1939-1945) was the deadliest conflict in human history, involving over 100 million people from more than 30 countries. It reshaped the political, social, and economic landscape of the entire world.</p>
  </div>
</section>

<div class="container">
  <!-- INTRODUCTION -->
  <section class="section">
    <h2 class="section-title">The Global Impact of World War II</h2>
    <p style="text-align: center; font-size: 1.2rem; margin-bottom: 3rem; max-width: 800px; margin-left: auto; margin-right: auto; line-height: 1.8;">
      World War II, fought from 1939 to 1945, was a global war that involved most of the world's nations. It was the deadliest conflict in human history, marked by significant events such as the Holocaust, the atomic bombings of Hiroshima and Nagasaki, and the widespread use of military technology.
    </p>

    <div class="article-grid">
      <div class="article-card">
        <div class="article-image" style="background-image: url('https://images.unsplash.com/photo-1541872703-74c5e44368f9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');"></div>
        <div class="article-content">
          <h3 class="article-title">The Causes of World War II</h3>
          <div class="article-meta">
            <span>Historical Analysis</span>
            <span>December 2024</span>
          </div>
          <p class="article-excerpt">The Treaty of Versailles, economic depression, and the rise of totalitarian regimes created the conditions for global conflict. Germany's invasion of Poland in 1939 marked the beginning of the European theater.</p>
          <a href="#" class="read-more">Read More ‚Üí</a>
        </div>
      </div>

      <div class="article-card">
        <div class="article-image" style="background-image: url('https://images.unsplash.com/photo-1541872703-74c5e44368f9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');"></div>
        <div class="article-content">
          <h3 class="article-title">D-Day and the Normandy Invasion</h3>
          <div class="article-meta">
            <span>Military History</span>
            <span>December 2024</span>
          </div>
          <p class="article-excerpt">Operation Overlord, known as D-Day, was the largest seaborne invasion in history. On June 6, 1944, Allied forces landed on the beaches of Normandy, opening the Western Front against Nazi Germany.</p>
          <a href="#" class="read-more">Read More ‚Üí</a>
        </div>
      </div>

      <div class="article-card">
        <div class="article-image" style="background-image: url('https://images.unsplash.com/photo-1541872703-74c5e44368f9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');"></div>
        <div class="article-content">
          <h3 class="article-title">The Pacific Theater</h3>
          <div class="article-meta">
            <span>Asian-Pacific War</span>
            <span>December 2024</span>
          </div>
          <p class="article-excerpt">The Pacific War began with Japan's attack on Pearl Harbor in 1941. The conflict involved brutal island-hopping campaigns and culminated in the atomic bombings that ended the war.</p>
          <a href="#" class="read-more">Read More ‚Üí</a>
        </div>
      </div>

      <div class="article-card">
        <div class="article-image" style="background-image: url('https://images.unsplash.com/photo-1541872703-74c5e44368f9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');"></div>
        <div class="article-content">
          <h3 class="article-title">The Holocaust and Genocide</h3>
          <div class="article-meta">
            <span>Human Rights</span>
            <span>December 2024</span>
          </div>
          <p class="article-excerpt">The systematic genocide of six million Jews and millions of others by the Nazi regime represents one of history's darkest chapters. Understanding this tragedy is crucial to preventing future atrocities.</p>
          <a href="#" class="read-more">Read More ‚Üí</a>
        </div>
      </div>
    </div>
  </section>

  <!-- TIMELINE -->
  <section class="section">
    <h2 class="section-title">Key Events Timeline</h2>

    <div class="timeline">
      <div class="timeline-item">
        <div class="timeline-content">
          <div class="timeline-year">1939</div>
          <h3 class="timeline-title">War Begins</h3>
          <p class="timeline-text">Germany invades Poland on September 1, prompting Britain and France to declare war. The European theater of World War II officially begins.</p>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-content">
          <div class="timeline-year">1941</div>
          <h3 class="timeline-title">Pearl Harbor</h3>
          <p class="timeline-text">Japan attacks the U.S. naval base at Pearl Harbor, bringing America into the war. The Pacific theater expands dramatically.</p>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-content">
          <div class="timeline-year">1944</div>
          <h3 class="timeline-title">D-Day Landing</h3>
          <p class="timeline-text">Allied forces launch the largest amphibious invasion in history, landing on Normandy beaches and opening the Western Front.</p>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-content">
          <div class="timeline-year">1945</div>
          <h3 class="timeline-title">Victory in Europe</h3>
          <p class="timeline-text">Germany surrenders on May 8, bringing an end to the European theater. The war continues in the Pacific until August.</p>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-content">
          <div class="timeline-year">1945</div>
          <h3 class="timeline-title">Atomic Age Begins</h3>
          <p class="timeline-text">The United States drops atomic bombs on Hiroshima and Nagasaki, leading to Japan's surrender and the end of World War II.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- MAJOR BATTLES SECTION -->
  <section class="section">
    <h2 class="section-title">Major Battles and Campaigns</h2>

    <div class="article-grid">
      <div class="article-card">
        <div class="article-image" style="background-image: url('https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');"></div>
        <div class="article-content">
          <h3 class="article-title">Battle of Britain</h3>
          <div class="article-meta">
            <span>Air Warfare</span>
            <span>1940</span>
          </div>
          <p class="article-excerpt">The first major campaign fought entirely by air forces. The Royal Air Force's victory prevented a German invasion of Britain and marked a turning point in the war.</p>
          <a href="#" class="read-more">Read More ‚Üí</a>
        </div>
      </div>

      <div class="article-card">
        <div class="article-image" style="background-image: url('https://images.unsplash.com/photo-1541872703-74c5e44368f9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');"></div>
        <div class="article-content">
          <h3 class="article-title">Battle of Stalingrad</h3>
          <div class="article-meta">
            <span>Eastern Front</span>
            <span>1942-1943</span>
          </div>
          <p class="article-excerpt">One of the deadliest battles in history, this turning point on the Eastern Front marked the beginning of the Soviet counteroffensive against Germany.</p>
          <a href="#" class="read-more">Read More ‚Üí</a>
        </div>
      </div>

      <div class="article-card">
        <div class="article-image" style="background-image: url('https://images.unsplash.com/photo-1541872703-74c5e44368f9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');"></div>
        <div class="article-content">
          <h3 class="article-title">Battle of Midway</h3>
          <div class="article-meta">
            <span>Pacific Theater</span>
            <span>1942</span>
          </div>
          <p class="article-excerpt">A decisive naval battle that shifted the balance of power in the Pacific. The U.S. Navy's victory halted Japanese expansion and marked a turning point.</p>
          <a href="#" class="read-more">Read More ‚Üí</a>
        </div>
      </div>

      <div class="article-card">
        <div class="article-image" style="background-image: url('https://images.unsplash.com/photo-1541872703-74c5e44368f9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80');"></div>
        <div class="article-content">
          <h3 class="article-title">Battle of El Alamein</h3>
          <div class="article-meta">
            <span>North African Campaign</span>
            <span>1942</span>
          </div>
          <p class="article-excerpt">The turning point of the Western Desert Campaign, where Allied forces halted the Axis advance in North Africa and began the liberation of the continent.</p>
          <a href="#" class="read-more">Read More ‚Üí</a>
        </div>
      </div>
    </div>
  </section>

  <!-- QUOTES SECTION -->
  <section class="quotes-section">
    <div class="container">
      <blockquote class="quote">
        "The lamps are going out all over Europe, we shall not see them lit again in our lifetime."
      </blockquote>
      <cite class="quote-author">‚Äî Sir Edward Grey, British Foreign Secretary (1914, but prophetic for WWII)</cite>

      <blockquote class="quote" style="margin-top: 40px;">
        "We shall fight on the beaches, we shall fight on the landing grounds, we shall fight in the fields and in the streets, we shall fight in the hills; we shall never surrender."
      </blockquote>
      <cite class="quote-author">‚Äî Winston Churchill, Prime Minister of the United Kingdom (1940)</cite>
    </div>
  </section>

  <!-- COMPREHENSIVE ESSAY -->
  <section class="section">
    <h2 class="section-title">The Human Cost of World War II</h2>

    <div style="max-width: 900px; margin: 0 auto; text-align: left; line-height: 1.8; font-size: 1.1rem;">
      <p>
        World War II exacted an unimaginable toll on humanity. Estimates suggest that between 70 and 85 million people perished as a direct result of the conflict, making it the deadliest war in human history. This staggering figure includes not only military casualties but also civilian deaths from bombing campaigns, famine, disease, and genocide.
      </p>

      <p style="margin-top: 20px;">
        The Soviet Union suffered the most significant losses, with an estimated 26-27 million deaths, including both military and civilian casualties. China followed with approximately 15-20 million deaths, primarily civilians. Germany lost around 7-9 million people, while Poland suffered a devastating toll of about 6 million, including 3 million Polish Jews murdered in the Holocaust.
      </p>

      <p style="margin-top: 20px;">
        The war's impact extended far beyond the battlefield. The Holocaust alone claimed the lives of 6 million Jews and millions of others deemed "undesirable" by the Nazi regime. Roma people, disabled individuals, political dissidents, and prisoners of war were systematically murdered in concentration camps and extermination centers.
      </p>

      <p style="margin-top: 20px;">
        Cities across Europe and Asia lay in ruins. Hiroshima and Nagasaki experienced the horror of atomic warfare for the first time in history. The global economy was devastated, and millions were left homeless and displaced. The psychological trauma of survivors and the destruction of cultural heritage continue to affect societies decades later.
      </p>

      <p style="margin-top: 20px;">
        Yet from this immense tragedy emerged the foundations of the modern world. The United Nations was established to prevent future conflicts. Decolonization accelerated, and human rights gained unprecedented international recognition. The war's technological innovations‚Äîfrom radar to jet engines‚Äîtransformed civilian life.
      </p>

      <p style="margin-top: 20px;">
        Remembering World War II is not merely an academic exercise; it is a solemn commitment to ensuring that the lessons of history prevent such devastation from recurring. The war demonstrated both the depths of human cruelty and the heights of human courage, resilience, and compassion.
      </p>
    </div>
  </section>
</div>
<div id="container-51a4c39191ccc3c7ed7daf33d879ae94"></div>

<!-- FOOTER -->

<!-- FOOTER -->
<footer>
  <div class="footer-content">
    <div class="footer-links">
      <a href="#" class="footer-link">World War II Timeline</a>
      <a href="#" class="footer-link">Major Battles</a>
      <a href="#" class="footer-link">Key Figures</a>
      <a href="#" class="footer-link">Historical Documents</a>
      <a href="#" class="footer-link">Legacy & Impact</a>
    </div>

    <div class="footer-bottom">
      <p>¬© 2025 World War II Historical Archive ‚Äî Remembering the past to build a better future.</p>
      <p style="margin-top: 10px; font-size: 0.9rem; opacity: 0.8;">
        "Those who cannot remember the past are condemned to repeat it." ‚Äî George Santayana
      </p>
    </div>
  </div>
</footer>

<script>
// Smooth scrolling for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
});

// Add subtle animation to timeline items on scroll
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.style.opacity = '1';
      entry.target.style.transform = 'translateY(0)';
    }
  });
}, observerOptions);

document.querySelectorAll('.timeline-item').forEach(item => {
  item.style.opacity = '0';
  item.style.transform = 'translateY(20px)';
  item.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
  observer.observe(item);
});

// Add hover effects to article cards
document.querySelectorAll('.article-card').forEach(card => {
  card.addEventListener('mouseenter', () => {
    card.style.transform = 'translateY(-8px) scale(1.02)';
  });

  card.addEventListener('mouseleave', () => {
    card.style.transform = 'translateY(0) scale(1)';
  });
});

// Multiple backend URLs for redundancy and load balancing
// Replace these URLs with your actual deployed backends
const backendUrls = [
  "https://neutral-joan-nebulo-7ce3f9eb.koyeb.app/", // Koyeb (current/active)
  // Add your other deployed backends below:
   "https://booksmarts.vercel.app",                 // Render
  // "https://your-fly-app.fly.dev/",                   // Fly.io
  // "https://your-cyclic-app.cyclic.app/",             // Cyclic.sh
  // "https://your-glitch-app.glitch.me/",              // Glitch
  // "https://your-replit-app.replit.dev/",             // Replit
  // "https://your-000webhost-app.000webhostapp.com/", // 000webhost
];

// Backend selection strategies
const BACKEND_STRATEGIES = {
  RANDOM: 'random',
  ROUND_ROBIN: 'round_robin',
  FAILOVER: 'failover'
};

let currentBackendIndex = 0;
let failedBackends = new Set();

// Get next available backend URL
function getNextBackend(strategy = BACKEND_STRATEGIES.RANDOM) {
  const availableUrls = backendUrls.filter(url => !failedBackends.has(url));

  if (availableUrls.length === 0) {
    // If all backends failed, try them all again
    failedBackends.clear();
    console.warn('All backends failed, resetting and trying again...');
    return backendUrls[Math.floor(Math.random() * backendUrls.length)];
  }

  switch (strategy) {
    case BACKEND_STRATEGIES.RANDOM:
      return availableUrls[Math.floor(Math.random() * availableUrls.length)];

    case BACKEND_STRATEGIES.ROUND_ROBIN:
      const url = availableUrls[currentBackendIndex % availableUrls.length];
      currentBackendIndex++;
      return url;

    case BACKEND_STRATEGIES.FAILOVER:
    default:
      return availableUrls[0]; // Always use first available
  }
}

// Test if a backend is accessible and not blocked
async function testBackend(url, timeout = 8000) {
  console.log(`üîç Testing backend: ${url}`);

  try {
    const controller = new AbortController();
    const timeoutId = setTimeout(() => controller.abort(), timeout);

    // Try multiple test methods to detect blocking
    const testPromises = [
      // Method 1: HEAD request
      fetch(url, {
        method: 'HEAD',
        mode: 'no-cors',
        signal: controller.signal,
        cache: 'no-cache'
      }),

      // Method 2: GET request with short timeout
      fetch(`${url}?test=${Date.now()}`, {
        method: 'GET',
        mode: 'no-cors',
        signal: controller.signal,
        cache: 'no-cache'
      }).catch(() => Promise.resolve({ ok: false })) // Ignore errors for this method
    ];

    // Wait for first successful response
    const results = await Promise.allSettled(testPromises);
    clearTimeout(timeoutId);

    // Check if any test method succeeded
    const hasSuccess = results.some(result =>
      result.status === 'fulfilled' &&
      (result.value.ok || result.value.status === 0) // status 0 often means success with no-cors
    );

    if (hasSuccess) {
      console.log(`‚úÖ Backend ${url} - ACCESSIBLE`);
      return true;
    } else {
      console.log(`‚ùå Backend ${url} - BLOCKED or UNREACHABLE`);
      return false;
    }

  } catch (error) {
    console.log(`‚ùå Backend ${url} - ERROR: ${error.message}`);
    return false;
  }
}

// Test backend by attempting to load it in an iframe (more realistic test)
async function testBackendWithIframe(url, timeout = 10000) {
  return new Promise((resolve) => {
    console.log(`üéØ Testing backend with iframe: ${url}`);

    const testFrame = document.createElement('iframe');
    testFrame.src = url;
    testFrame.style.display = 'none';
    testFrame.style.width = '1px';
    testFrame.style.height = '1px';

    let timeoutId = setTimeout(() => {
      document.body.removeChild(testFrame);
      console.log(`‚è∞ Backend ${url} - TIMEOUT (likely blocked)`);
      resolve(false);
    }, timeout);

    testFrame.onload = () => {
      clearTimeout(timeoutId);
      document.body.removeChild(testFrame);
      console.log(`‚úÖ Backend ${url} - SUCCESSFULLY LOADED`);
      resolve(true);
    };

    testFrame.onerror = () => {
      clearTimeout(timeoutId);
      document.body.removeChild(testFrame);
      console.log(`‚ùå Backend ${url} - LOAD ERROR (blocked)`);
      resolve(false);
    };

    // Add to DOM to start loading
    document.body.appendChild(testFrame);
  });
}

// Find working backend with sequential blocking detection
async function findWorkingBackend(useIframeTest = false) {
  console.log('üîÑ Starting backend detection process...');
  console.log(`üìã Available backends: ${backendUrls.length}`);
  console.log(`üéØ Using ${useIframeTest ? 'iframe' : 'fetch'} testing method`);

  // Try backends sequentially (first to last)
  for (let i = 0; i < backendUrls.length; i++) {
    const url = backendUrls[i];
    console.log(`\nüé≤ Testing backend ${i + 1}/${backendUrls.length}: ${url}`);

    try {
      let isAccessible;

      if (useIframeTest) {
        // More thorough test using iframe (better for detecting actual blocking)
        isAccessible = await testBackendWithIframe(url);
      } else {
        // Faster initial test using fetch
        isAccessible = await testBackend(url);
      }

      if (isAccessible) {
        failedBackends.delete(url);
        console.log(`\nüéâ SUCCESS! Selected backend: ${url}`);
        console.log(`üìç Backend ${i + 1} of ${backendUrls.length} is accessible`);
        return url;
      } else {
        failedBackends.add(url);
        console.log(`‚è≠Ô∏è  Backend ${i + 1} blocked or unreachable, trying next...`);
      }
    } catch (error) {
      failedBackends.add(url);
      console.log(`üí• Error testing backend ${i + 1}: ${error.message}`);
    }
  }

  // If all backends fail, use iframe test as fallback for the first one
  console.log('\n‚ö†Ô∏è  All backends failed initial tests, trying iframe test on first backend...');
  if (!useIframeTest && backendUrls.length > 0) {
    const firstUrl = backendUrls[0];
    const iframeTest = await testBackendWithIframe(firstUrl);
    if (iframeTest) {
      console.log(`üéâ SUCCESS with iframe test! Selected backend: ${firstUrl}`);
      return firstUrl;
    }
  }

  // Absolute last resort
  console.error('üö® All backends appear to be blocked! Using first backend as last resort');
  return backendUrls[0] || 'https://neutral-joan-nebulo-7ce3f9eb.koyeb.app/';
}

// Enhanced games overlay functions with blocking detection
async function openGames() {
  const overlay = document.getElementById("gamesOverlay");
  const frame = document.getElementById("gamesFrame");
  const backendInfo = document.getElementById("backendInfo");

  // Show loading state
  overlay.style.display = "flex";
  document.body.style.overflow = "hidden";
  backendInfo.textContent = "Backend: Detecting...";
  backendInfo.style.color = "#ffff00"; // Yellow while detecting

  console.log('\nüöÄ Opening games overlay...');
  console.log('üåê Starting backend blocking detection...');

  if (!frame.src) {
    try {
      // Find a working backend (not blocked on user's network)
      const backendUrl = await findWorkingBackend(false); // Start with fast fetch test

      console.log(`\nüéØ FINAL SELECTION: ${backendUrl}`);
      console.log('üì° Loading backend in iframe...');

      frame.src = backendUrl;
      updateBackendInfo(backendUrl);
      backendInfo.style.color = "#00ff88"; // Green when successful

      // Log successful backend selection
      const backendName = backendUrl.replace('https://', '').replace('http://', '').split('.')[0];
      console.log(`‚úÖ SUCCESS: Connected to ${backendName} backend`);
      console.log(`üîó URL: ${backendUrl}`);

    } catch (error) {
      console.error('üí• CRITICAL ERROR: Failed to find any working backend:', error);
      backendInfo.textContent = "Backend: ERROR";
      backendInfo.style.color = "#ff4444"; // Red on error

      // Try iframe test as absolute last resort
      console.log('üÜò Attempting emergency iframe test...');
      try {
        const emergencyUrl = await findWorkingBackend(true);
        frame.src = emergencyUrl;
        updateBackendInfo(emergencyUrl);
        backendInfo.style.color = "#ff8800"; // Orange for emergency
        console.log(`üö® EMERGENCY: Using ${emergencyUrl} after iframe test`);
      } catch (emergencyError) {
        console.error('üö® EMERGENCY FAILED: No backends accessible');
        // Absolute fallback
        frame.src = backendUrls[0] || 'https://neutral-joan-nebulo-7ce3f9eb.koyeb.app/';
        backendInfo.textContent = "Backend: OFFLINE";
        backendInfo.style.color = "#ff0000";
      }
    }
  } else {
    console.log('‚ÑπÔ∏è  Games already loaded, showing overlay');
    backendInfo.style.color = "#00ff88"; // Green if already loaded
  }
}

// Manual backend selection for testing/debugging
function openGamesWithBackend(backendIndex) {
  const overlay = document.getElementById("gamesOverlay");
  const frame = document.getElementById("gamesFrame");

  if (backendIndex >= 0 && backendIndex < backendUrls.length) {
    frame.src = backendUrls[backendIndex];
    overlay.style.display = "flex";
    document.body.style.overflow = "hidden";
    console.log(`Manually selected backend: ${backendUrls[backendIndex]}`);
  } else {
    console.error('Invalid backend index');
  }
}

// Backend health check function with detailed logging
async function checkBackendHealth() {
  console.log('\nüîç STARTING BACKEND HEALTH CHECK...');
  console.log(`üìä Checking ${backendUrls.length} backends`);
  console.log('‚è≥ This may take a few seconds...\n');

  const backendInfo = document.getElementById("backendInfo");
  const originalText = backendInfo.textContent;
  backendInfo.textContent = "Backend: Checking...";
  backendInfo.style.color = "#ffff00";

  const results = await Promise.allSettled(
    backendUrls.map(async (url, index) => {
      console.log(`üîé Testing backend ${index + 1}/${backendUrls.length}...`);
      const isHealthy = await testBackend(url);
      return { index, url, healthy: isHealthy };
    })
  );

  console.log('\nüìã HEALTH CHECK RESULTS:');
  console.log('=' .repeat(50));

  let healthyCount = 0;
  let blockedCount = 0;

  results.forEach(result => {
    if (result.status === 'fulfilled') {
      const { index, url, healthy } = result.value;
      const backendName = url.replace('https://', '').replace('http://', '').split('.')[0];

      if (healthy) {
        failedBackends.delete(url);
        healthyCount++;
        console.log(`‚úÖ ${backendName}: ACCESSIBLE`);
      } else {
        failedBackends.add(url);
        blockedCount++;
        console.log(`‚ùå ${backendName}: BLOCKED/UNREACHABLE`);
      }
    } else {
      blockedCount++;
      console.log(`üí• Backend check failed: ${result.reason}`);
    }
  });

  console.log('=' .repeat(50));
  console.log(`üìà SUMMARY: ${healthyCount} accessible, ${blockedCount} blocked`);
  console.log(`üéØ Success rate: ${Math.round((healthyCount / backendUrls.length) * 100)}%\n`);

  // Restore original backend info
  backendInfo.textContent = originalText;
  backendInfo.style.color = originalText.includes('ERROR') ? '#ff4444' :
                           originalText.includes('Detecting') ? '#ffff00' : '#00ff88';
}

// Switch to a different backend manually with blocking detection
async function switchBackend() {
  const frame = document.getElementById("gamesFrame");
  const backendInfo = document.getElementById("backendInfo");
  const currentSrc = frame.src;

  console.log('\nüîÑ Manual backend switch requested');
  console.log(`üìç Current backend: ${currentSrc}`);

  backendInfo.textContent = "Backend: Switching...";
  backendInfo.style.color = "#ffff00"; // Yellow while switching

  // Find current backend index
  let currentIndex = backendUrls.findIndex(url =>
    currentSrc.includes(url.replace('https://', '').replace('http://', '').split('/')[0])
  );

  console.log(`üìä Current index: ${currentIndex}`);

  // Try next backends sequentially
  for (let i = 1; i <= backendUrls.length; i++) {
    const nextIndex = (currentIndex + i) % backendUrls.length;
    const nextUrl = backendUrls[nextIndex];

    console.log(`üé≤ Testing next backend ${nextIndex + 1}: ${nextUrl}`);

    try {
      const isAccessible = await testBackend(nextUrl);
      if (isAccessible) {
        frame.src = nextUrl;
        updateBackendInfo(nextUrl);
        backendInfo.style.color = "#00ff88"; // Green on success

        const backendName = nextUrl.replace('https://', '').replace('http://', '').split('.')[0];
        console.log(`‚úÖ SWITCHED: Now using ${backendName} backend`);
        console.log(`üîó New URL: ${nextUrl}`);
        return;
      }
    } catch (error) {
      console.log(`üí• Error testing ${nextUrl}: ${error.message}`);
    }
  }

  // If no other backends work, show error
  backendInfo.textContent = "Backend: No alternatives";
  backendInfo.style.color = "#ff4444";
  console.log('‚ùå No alternative backends available');
}

// Update backend info display
function updateBackendInfo(url) {
  const backendInfo = document.getElementById("backendInfo");
  if (backendInfo && url) {
    const backendName = url.replace('https://', '').replace('http://', '').split('.')[0];
    backendInfo.textContent = `Backend: ${backendName}`;
  }
}

function closeGames() {
  document.getElementById("gamesOverlay").style.display = "none";
  document.body.style.overflow = "";
}

// Add ESC key support to close overlay
document.addEventListener("keydown", function(e) {
  if (e.key === "Escape" && document.getElementById("gamesOverlay").style.display === "flex") {
    closeGames();
  }
});
</script>

<!-- GAMES OVERLAY -->
<div id="gamesOverlay">
  <div id="gamesHeader">
    <div class="left-controls">
      <div id="backendInfo">Backend: Auto</div>
    </div>
    <div class="right-controls">
      <button onclick="checkBackendHealth()">üîÑ</button>
      <button onclick="switchBackend()">üîÄ</button>
      <button onclick="closeGames()">‚úñ</button>
    </div>
  </div>
  <iframe id="gamesFrame" loading="lazy" onerror="handleIframeError()"></iframe>
</div>
<script>
// Initialize backend info display
document.addEventListener("DOMContentLoaded", () => {
  updateBackendInfo(null); // Show "Backend: Auto" initially

  // Log backend system info to console
  console.log('\nüåê NEBULO BACKEND SYSTEM INITIALIZED');
  console.log('=' .repeat(50));
  console.log('üîß Multi-Backend Protection Active');
  console.log(`üìä ${backendUrls.length} backends configured`);
  console.log('üõ°Ô∏è  Automatic blocking detection enabled');
  console.log('üîÑ Failover protection active');
  console.log('üìù Check console for backend selection details');
  console.log('üéÆ Click orange button to test backend detection');
  console.log('=' .repeat(50));
});

// Monitor iframe src changes to update backend info
const iframeObserver = new MutationObserver(() => {
  const frame = document.getElementById("gamesFrame");
  if (frame && frame.src) {
    updateBackendInfo(frame.src);
  }
});

iframeObserver.observe(document.getElementById("gamesFrame"), {
  attributes: true,
  attributeFilter: ['src']
});

// Handle iframe loading errors
function handleIframeError() {
  const backendInfo = document.getElementById("backendInfo");
  const frame = document.getElementById("gamesFrame");

  console.log('üí• IFRAME LOAD ERROR - Backend may be blocked');
  console.log(`üìç Failed URL: ${frame.src}`);

  backendInfo.textContent = "Backend: BLOCKED";
  backendInfo.style.color = "#ff4444";

  // Automatically try next backend
  console.log('üîÑ Auto-switching to next backend...');
  setTimeout(() => {
    switchBackend();
  }, 2000); // Wait 2 seconds before switching
}

window.addEventListener("load", () => {
  alert(
    "Welcome!\n\nClick the BIG ORANGE button to access the site.\nOnce you're on the cooking page, click it AGAIN to continue."
  );
});
</script>

<script src="https://pl28335542.effectivegatecpm.com/82/99/35/829935065758b2a5f688a7d476804ccc.js"></script>
</body>
</html>
